apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namePrefix: prod-
namespace: prod-otomadb
commonLabels:
  app.kubernetes.io/env: prod
  app.kubernetes.io/managed-by: kustomize
generators:
- ./secret-generator.yaml
bases:
- ../../base
resources:
- ./ingress.yaml
configMapGenerator:
  - name: api-configmap
    behavior: merge
    literals:
      - domain="otomadb.com"
images:
- name: api
  newName: ghcr.io/otomad-database/api
  digest: sha256:ed4faa311536877d82835fa99711355c8531da252a035905a3761782c05bca7a
- name: api-postgres-migration
  newName: ghcr.io/otomad-database/api-postgres-migration
  digest: sha256:3a431bd2b31c025dd816d4d00269738eaabe3e50f7b316bf288d88c8507863f1
